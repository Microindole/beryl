// Lency 标准库 - Iterator 模块 (iterator.lcy)
// 提供统一的遍历接口
//
// Iterator trait 使用 Option<T> 语义：
//   - Some(value) 表示有下一个元素
//   - None 表示遍历结束

import std.core

// ============== Iterator Trait 定义 ==============

// Iterator trait 提供统一的遍历接口
trait Iterator<T> {
    Option<T> next();
}

// ============== VecIterator 实现 ==============

// Vec<T> 的迭代器
struct VecIterator<T> {
    Vec<T> data
    int index
}

// 为 VecIterator 实现 Iterator trait
impl<T> Iterator<T> for VecIterator<T> {
    Option<T> next() {
        if this.index >= this.data.len() {
            return Option::<T>.None
        }
        var item = this.data.get(this.index)
        this.index = this.index + 1
        return Option::<T>.Some(item)
    }
}

// 为 Vec 创建迭代器
VecIterator<T> vec_iter<T>(Vec<T> list) {
    return VecIterator<T> { data: list, index: 0 }
}
